<!DOCTYPE html>



<html lang="en" itemscope="" itemtype="http://schema.org/QAPage">

<!-- Mirrored from c.programmingpedia.net/en/knowledge-base/9053658/correct-format-specifier-to-print-pointer-or-address- by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Jan 2021 09:55:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- webmaster tools -->
        <meta name="google-site-verification" content="" />
        <!-- Open Graph Tags -->
        <meta name="title" property="og:title" content="[SOLVED] Correct format specifier to print pointer or address? | C Language Knowledge Base">
        <meta name="description" property="og:description" content="[SOLVED] Correct format specifier to print pointer or address? | C Language Knowledge Base">
        <title>[SOLVED] Correct format specifier to print pointer or address? | C Language Knowledge Base</title>

    

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    
        <style>
            body{margin:0;}img{max-width:100%;}ul{margin-top:0;margin-bottom:1rem;}.list-inline{padding-left:0;list-style:none;}.list-inline-item{display:inline-block;}.list-inline-item:not(:last-child){margin-right:.5rem;}.site-header{display:flex;height:60px;}.site-main,.site-footer{display:flex;}.col-aside-left-and-sidebar .col-aside-left,.col-sidebar,.col-content,.col-aside-right{position:relative;}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner,.site-header .col-content-inner{height:60px;}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner{position:fixed;z-index:1;}.site-main .col-aside-left-inner,.site-main .col-sidebar-inner,.site-main .col-aside-right-inner{height:calc(100vh - 60px);position:fixed;}.site-main .col-sidebar-overflow{height:calc(100vh - 60px);position:relative;overflow-x:hidden;overflow-y:auto;}.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:calc(50% - 450px);}.col-aside-left,.col-aside-left-inner{width:calc(50% - 750px);}.col-sidebar,.col-sidebar-inner{width:300px;}.col-content,.col-content-inner{width:1200px;}.col-aside-right,.col-aside-right-inner{width:calc(50% - 750px);}@media(max-width:1869px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:calc(50% - 500px);}.col-aside-left,.col-aside-left-inner{display:none;}.col-sidebar,.col-sidebar-inner{width:calc(50% - 500px);}.col-content,.col-content-inner{width:1000px;}.col-aside-right,.col-aside-right-inner{width:calc(50% - 500px);}}@media(max-width:1549px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:calc(50% - 400px);}.col-sidebar,.col-sidebar-inner{width:calc(50% - 400px);}.col-content,.col-content-inner{width:800px;}.col-aside-right,.col-aside-right-inner{width:calc(50% - 400px);}}@media(max-width:1229px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:300px;}.col-sidebar,.col-sidebar-inner{width:300px;}.col-content{width:calc(100% - 300px);}.col-content-inner{width:100%;}.col-aside-right,.col-aside-right-inner{display:none;}}@media(max-width:1000px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:250px;}.col-sidebar,.col-sidebar-inner{width:250px;}.col-content{width:calc(100% - 250px);}}@media(max-width:767px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{display:none;}.col-sidebar,.col-sidebar-inner{display:none;}.col-content{width:100%;}.site-main{display:initial;}.site-main .col-sidebar,.site-main .col-sidebar-inner{display:initial;width:100%;position:relative;}.site-main .col-sidebar-overflow{height:calc(30vh);}}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner,.site-header .col-content-inner{box-shadow:rgba(116,129,141,.1) 0 3px 8px 0;border-bottom:1px solid #d4dadf;}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner,.site-main .col-aside-left-inner,.site-main .col-sidebar-inner,.site-main .col-aside-right-inner{background:#f5f7f9 none repeat scroll 0% 0%;}.site-header .col-aside-left-and-sidebar-inner,.site-main .col-sidebar-inner{border-right:1px solid #e6ecf1;}.site-header .col-aside-right,.site-main .col-aside-right{border-left:1px solid #e6ecf1;}.brand{font-size:24px;font-weight:bold;height:100%;text-align:right;margin-right:20px;margin-top:10px;}
        </style>
    <link rel="stylesheet" type="text/css" href="../../../styles/master.min0e4d.css?v=todo">
    <!-- to fix/move? -->
    

    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-55584370-32"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-131737769-1');
    </script>


</head>
<body>


<div class="site-header">
    <div class="col-aside-left-and-sidebar">
        <div class="col-aside-left-and-sidebar-inner">
            <div class="brand">
                <i class="fas fa-yin-yang" style="color: #0056b3;"></i>&nbsp;
                C Language Pedia
            </div>
        </div>
    </div>
    <div class="col-content">
        <div class="col-content-inner">
<div>
    <ul class="list-inline">
        <li class="list-inline-item"><a href="../../../index.html">Tutorial</a></li>
            <li class="list-inline-item"><a href="../../knowledge-base.html">Knowledge-Base</a></li>

            <li class="list-inline-item"><a href="../../awesome-learning/book.html">Awesome</a></li>
    </ul>
</div>

<style>
    .site-header .col-content .list-inline {
        padding-left: 20px;
        padding-top: 15px;

        font-weight: bold;
    }
</style>
        </div>
    </div>
    <div class="col-aside-right">
        <div class="col-aside-right-inner">
            
        </div>
    </div>
</div>
<div class="site-main">
    <div class="col-aside-left">
        <div class="col-aside-left-inner">
            
        </div>
    </div>
    <div class="col-sidebar">
        <div class="col-sidebar-inner">

            <div class="col-sidebar-overflow">
                
            </div>

        </div>
    </div>
    <div class="col-content">
        <div class="col-content-inner">
            


<div id="knowledge-base" class="kb-details">
    <div class="row">
        <div class="col-lg-1 col-xl-1">
        </div>
        <div class="col-lg-9 col-xl-9" itemprop="mainEntity" itemscope itemtype="http://schema.org/Question">
            <div class="container-h1">
                <h1 itemprop="name" id="correct-format-specifier-to-print-pointer-or-address-">Correct format specifier to print pointer or address?</h1>
                <div class="tag-list">
                        <span class="tag-item"><a href="../tag/c.html">c</a></span>
                        <span class="tag-item"><a href="../tag/format.html">format</a></span>
                        <span class="tag-item"><a href="../tag/memory-address.html">memory-address</a></span>
                        <span class="tag-item"><a href="../tag/pointers.html">pointers</a></span>
                </div>
            </div>
            <br>
            <div class="search-results-container">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="block-question">
                            <div class="container-question">
                                <i class="fab fa-stack-overflow" style="font-size: 32px; position: absolute; left: -15px; top: -15px;"></i>
                                <h3 id="question">Question</h3>
                                <div itemprop="text">
                                    <p>Which format specifier should I be using to print the address of a variable? I am confused between the below lot.</p>

<blockquote>
  <p>%u - unsigned integer</p>
  
  <p>%x - hexadecimal value</p>
  
  <p>%p - void pointer</p>
</blockquote>

<p>Which would be the optimum format to print an address?</p>

                                </div>

                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="profile-container">
                                        <div class="profile-details-container d-flex align-items-center">
                                            <div class="asker-name" itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="https://stackoverflow.com/users/340236/san" target="_blank"><span itemprop="name">San</span></a></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="display: none">
                                    <div itemprop="answerCount">1</div>
                                    <div itemprop="upvoteCount">161</div>
                                    <div itemprop="dateCreated">10/14/2018 10:19:55 AM</div>
                                </div>
                            </div>
                        </div>
                        
                        <br/>
                    </div>
                    <div class="col-sm-6">
                            <div id="answer-0" class="block-question answer" itemprop="acceptedAnswer" itemscope itemtype="http://schema.org/Answer">
                                <div class="container-question">
                                    <h3 id="accepted-answer">Accepted Answer</h3>
                                    <div itemprop="text">
                                        <p>The simplest answer, assuming you don't mind the vagaries and variations in format between different platforms, is the standard <code>%p</code> notation.</p>

<p>The C99 standard (ISO/IEC 9899:1999) says in §7.19.6.1 ¶8:</p>

<blockquote>
  <p><code>p</code> The argument shall be a pointer to <code>void</code>. The value of the pointer is
  converted to a sequence of printing characters, in an implementation-defined
  manner.</p>
</blockquote>

<p>(In C11 — ISO/IEC 9899:2011 — the information is in §7.21.6.1 ¶8.)</p>

<p>On some platforms, that will include a leading <code>0x</code> and on others it won't, and the letters could be in lower-case or upper-case, and the C standard doesn't even define that it shall be hexadecimal output though I know of no implementation where it is not.</p>

<p>It is somewhat open to debate whether you should explicitly convert the pointers with a <code>(void *)</code> cast.  It is being explicit, which is usually good (so it is what I do), and the standard says 'the argument shall be a pointer to <code>void</code>'.  On most machines, you would get away with omitting an explicit cast.  However, it would matter on a machine where the bit representation of a <code>char *</code> address for a given memory location is different from the '<em>anything else pointer</em>' address for the same memory location.  This would be a word-addressed, instead of byte-addressed, machine.  Such machines are not common (probably not available) these days, but the first machine I worked on after university was one such (ICL Perq).</p>

<p>If you aren't happy with the implementation-defined behaviour of <code>%p</code>, then use C99 <code>&lt;inttypes.h&gt;</code> and <code>uintptr_t</code> instead:</p>

<pre><code>printf("0x%" PRIXPTR "\n", (uintptr_t)your_pointer);
</code></pre>

<p>This allows you to fine-tune the representation to suit yourself.  I chose to have the hex digits in upper-case so that the number is uniformly the same height and the characteristic dip at the start of <code>0xA1B2CDEF</code> appears thus, not like <code>0xa1b2cdef</code> which dips up and down along the number too.  Your choice though, within very broad limits.  The <code>(uintptr_t)</code> cast is unambiguously recommended by GCC when it can read the format string at compile time.  I think it is correct to request the cast, though I'm sure there are some who would ignore the warning and get away with it most of the time.</p>

<hr>

<p>Kerrek asks in the comments:</p>

<blockquote>
  <p>I'm a bit confused about standard promotions and variadic arguments. Do all pointers get standard-promoted to void*? Otherwise, if <code>int*</code> were, say, two bytes, and <code>void*</code> were 4 bytes, then it'd clearly be an error to read four bytes from the argument, non?</p>
</blockquote>

<p>I was under the illusion that the C standard says that all object pointers must be the same size, so <code>void *</code> and <code>int *</code> cannot be different sizes.  However, what I think is the relevant section of the C99 standard is not so emphatic (though I don't know of an implementation where what I suggested is true is actually false):</p>

<blockquote>
  <p>§6.2.5 Types</p>
  
  <p>¶26 A pointer to void shall have the same representation and alignment requirements as a pointer to a character type.<sup>39)</sup> Similarly, pointers to qualified or unqualified versions of compatible types shall have the same representation and alignment requirements. All pointers to structure types shall have the same representation and alignment requirements as each other. All pointers to union types shall have the same representation and alignment requirements as each other. Pointers to other types need not have the same representation or alignment requirements.</p>
  
  <p><sup>39)</sup> The same representation and alignment requirements are meant to imply interchangeability as arguments to functions, return values from functions, and members of unions.</p>
</blockquote>

<p>(C11 says exactly the same in the section §6.2.5, ¶28, and footnote 48.)</p>

<p>So, all pointers to structures must be the same size as each other, and must share the same alignment requirements, even though the structures the pointers point at may have different alignment requirements.  Similarly for unions.  Character pointers and void pointers must have the same size and alignment requirements.  Pointers to variations on <code>int</code> (meaning <code>unsigned int</code> and <code>signed int</code>) must have the same size and alignment requirements as each other; similarly for other types.  But the C standard doesn't formally say that <code>sizeof(int *) == sizeof(void *)</code>.  Oh well, SO is good for making you inspect your assumptions.</p>

<p>The C standard definitively does not require function pointers to be the same size as object pointers.  That was necessary not to break the different memory models on DOS-like systems.  There you could have 16-bit data pointers but 32-bit function pointers, or vice versa.  This is why the C standard does not mandate that function pointers can be converted to object pointers and vice versa.</p>

<p>Fortunately (for programmers targetting POSIX), POSIX steps into the breach and does mandate that function pointers and data pointers are the same size:</p>

<blockquote>
  <p>§2.12.3 <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_12">Pointer Types</a></p>
  
  <p>All function pointer types shall have the same representation as the type pointer to void. Conversion of a function pointer to <code>void *</code> shall not alter the representation. A <code>void *</code> value resulting from such a conversion can be converted back to the original function pointer type, using an explicit cast, without loss of information.</p>
  
  <p>Note:
  The ISO C standard does not require this, but it is required for POSIX conformance.</p>
</blockquote>

<p>So, it does seem that explicit casts to <code>void *</code> are strongly advisable for maximum reliability in the code when passing a pointer to a variadic function such as <code>printf()</code>.  On POSIX systems, it is safe to cast a function pointer to a void pointer for printing.  On other systems, it is not necessarily safe to do that, nor is it necessarily safe to pass pointers other than <code>void *</code> without a cast.</p>

                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="profile-container">
                                            <div class="profile-details-container d-flex align-items-center">
                                                    <div class="asker-name" itemprop="author" itemscope itemtype="https://schema.org/Person">
                                                        <a href="https://stackoverflow.com/users/15168/jonathan-leffler" target="_blank"><span itemprop="name">Jonathan Leffler</span></a>
                                                    </div>
                                            </div>
                                        </div>
                                    </div>
                                        <div style="display: none">
                                            <div itemprop="url">https://c.programmingpedia.net/en/knowledge-base/9053658/correct-format-specifier-to-print-pointer-or-address-#answer-0</div>
                                            <div itemprop="upvoteCount">201</div>
                                            <div itemprop="dateCreated">11/6/2014 4:12:57 PM</div>
                                        </div>
                                </div>
                            </div>
                            <br/>
                            <div id="answer-1" class="block-question second-answer" >
                                <div class="container-question">
                                    <h3 id="popular-answer">Popular Answer</h3>
                                    <div >
                                        <p><code>p</code> is the conversion specifier to print pointers. Use this.</p>

<pre><code>int a = 42;

printf("%p\n", (void *) &amp;a);
</code></pre>

<p>Remember that omitting the cast is undefined behavior and that printing with <code>p</code> conversion specifier is done in an implementation-defined manner.</p>

                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="profile-container">
                                            <div class="profile-details-container d-flex align-items-center">
                                                    <div class="asker-name"><a href="https://stackoverflow.com/users/1119701/ouah" target="_blank">ouah</a></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>
                    </div>
                </div>
                <div class="text-center mt-5 mb-5">
                    <a href="https://stackoverflow.com/questions/9053658" class="btn-only d-inline-block stack-overflow-identity" target="_blank"><i class="fab fa-stack-overflow"></i> View more on Stack Overflow</a>
                </div>
            </div>
            
            <div class="attribution">
                <div>Licensed under: <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank">CC-BY-SA</a> with <a href="https://stackoverflow.blog/2009/06/25/attribution-required/" target="_blank">attribution</a></div>
                <div>Not affiliated with: <a href="https://stackoverflow.com/questions/tagged/dapper" target="_blank">Stack Overflow</a></div>
                
            </div>
        </div>

    </div>
</div>
            
        </div>
    </div>
    <div class="col-aside-right">
        <div class="col-aside-right-inner">
        </div>
    </div>
</div>
<div class="site-footer">
</div>
    
    <a href="#" id="scroll-to-top" class="back-to-top" style="display: inline;">Icon</a>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="http://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script>
    $(function() {
        $('a').each(function() {
            var a = new RegExp('/' + window.location.host + '/');
            if (!a.test(this.href)) {
                $(this).attr("target", "_blank");
            }
        });

        $("table").addClass("table table-bordered table-hover table-responsive-sm table-striped");
        $("thead").addClass("thead-dark");

        $('aside a').each(function() {
            if ($(this).attr('href') == '/{{page.permalink}}' ||
                $(this).attr('href') == '{{ site.github.url }}/{{page.permalink}}') {
                $(this).addClass('font-weight-bold');
            }
        });
    });
</script>


</body>

<!-- Mirrored from c.programmingpedia.net/en/knowledge-base/9053658/correct-format-specifier-to-print-pointer-or-address- by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Jan 2021 09:55:23 GMT -->
</html>

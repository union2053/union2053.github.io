<!DOCTYPE html>



<html lang="en" itemscope itemtype="http://schema.org/TechArticle">

<!-- Mirrored from c.programmingpedia.net/en/tutorial/6779/testing-frameworks by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Jan 2021 09:03:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- webmaster tools -->
        <meta name="google-site-verification" content="" />
        <!-- Open Graph Tags -->
        <meta name="title" property="og:title" content="Testing frameworks | C Language Tutorial">
        <meta name="description" property="og:description" content="Testing frameworks | C Language Tutorial">
        <title>Testing frameworks | C Language Tutorial</title>

    

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    
        <style>
            body{margin:0;}img{max-width:100%;}ul{margin-top:0;margin-bottom:1rem;}.list-inline{padding-left:0;list-style:none;}.list-inline-item{display:inline-block;}.list-inline-item:not(:last-child){margin-right:.5rem;}.site-header{display:flex;height:60px;}.site-main,.site-footer{display:flex;}.col-aside-left-and-sidebar .col-aside-left,.col-sidebar,.col-content,.col-aside-right{position:relative;}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner,.site-header .col-content-inner{height:60px;}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner{position:fixed;z-index:1;}.site-main .col-aside-left-inner,.site-main .col-sidebar-inner,.site-main .col-aside-right-inner{height:calc(100vh - 60px);position:fixed;}.site-main .col-sidebar-overflow{height:calc(100vh - 60px);position:relative;overflow-x:hidden;overflow-y:auto;}.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:calc(50% - 450px);}.col-aside-left,.col-aside-left-inner{width:calc(50% - 750px);}.col-sidebar,.col-sidebar-inner{width:300px;}.col-content,.col-content-inner{width:1200px;}.col-aside-right,.col-aside-right-inner{width:calc(50% - 750px);}@media(max-width:1869px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:calc(50% - 500px);}.col-aside-left,.col-aside-left-inner{display:none;}.col-sidebar,.col-sidebar-inner{width:calc(50% - 500px);}.col-content,.col-content-inner{width:1000px;}.col-aside-right,.col-aside-right-inner{width:calc(50% - 500px);}}@media(max-width:1549px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:calc(50% - 400px);}.col-sidebar,.col-sidebar-inner{width:calc(50% - 400px);}.col-content,.col-content-inner{width:800px;}.col-aside-right,.col-aside-right-inner{width:calc(50% - 400px);}}@media(max-width:1229px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:300px;}.col-sidebar,.col-sidebar-inner{width:300px;}.col-content{width:calc(100% - 300px);}.col-content-inner{width:100%;}.col-aside-right,.col-aside-right-inner{display:none;}}@media(max-width:1000px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:250px;}.col-sidebar,.col-sidebar-inner{width:250px;}.col-content{width:calc(100% - 250px);}}@media(max-width:767px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{display:none;}.col-sidebar,.col-sidebar-inner{display:none;}.col-content{width:100%;}.site-main{display:initial;}.site-main .col-sidebar,.site-main .col-sidebar-inner{display:initial;width:100%;position:relative;}.site-main .col-sidebar-overflow{height:calc(30vh);}}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner,.site-header .col-content-inner{box-shadow:rgba(116,129,141,.1) 0 3px 8px 0;border-bottom:1px solid #d4dadf;}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner,.site-main .col-aside-left-inner,.site-main .col-sidebar-inner,.site-main .col-aside-right-inner{background:#f5f7f9 none repeat scroll 0% 0%;}.site-header .col-aside-left-and-sidebar-inner,.site-main .col-sidebar-inner{border-right:1px solid #e6ecf1;}.site-header .col-aside-right,.site-main .col-aside-right{border-left:1px solid #e6ecf1;}.brand{font-size:24px;font-weight:bold;height:100%;text-align:right;margin-right:20px;margin-top:10px;}
        </style>
    <link rel="stylesheet" type="text/css" href="../../../styles/master.min0e4d.css?v=todo">
    <!-- to fix/move? -->
    

    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-55584370-32"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-131737769-1');
    </script>


</head>
<body>


<div class="site-header">
    <div class="col-aside-left-and-sidebar">
        <div class="col-aside-left-and-sidebar-inner">
            <div class="brand">
                <i class="fas fa-yin-yang" style="color: #0056b3;"></i>&nbsp;
                C Language Pedia
            </div>
        </div>
    </div>
    <div class="col-content">
        <div class="col-content-inner">
<div>
    <ul class="list-inline">
        <li class="list-inline-item"><a href="../../../index.html">Tutorial</a></li>
            <li class="list-inline-item"><a href="../../knowledge-base.html">Knowledge-Base</a></li>

            <li class="list-inline-item"><a href="../../awesome-learning/book.html">Awesome</a></li>
    </ul>
</div>

<style>
    .site-header .col-content .list-inline {
        padding-left: 20px;
        padding-top: 15px;

        font-weight: bold;
    }
</style>
        </div>
    </div>
    <div class="col-aside-right">
        <div class="col-aside-right-inner">
            
        </div>
    </div>
</div>
<div class="site-main">
    <div class="col-aside-left">
        <div class="col-aside-left-inner">
            
        </div>
    </div>
    <div class="col-sidebar">
        <div class="col-sidebar-inner">

            <div class="col-sidebar-overflow">
                
    <ul>
                    <li><a href="../../../index.html">Getting started with C Language</a></li>
                <li><a href="../6846/-ctype-h----character-classification---conversion.html">&lt;ctype.h&gt; â€” character classification &amp; conversion</a></li>
                <li><a href="../1301/aliasing-and-effective-type.html">Aliasing and effective type</a></li>
                <li><a href="../322/arrays.html">Arrays</a></li>
                <li><a href="../555/assertion.html">Assertion</a></li>
                <li><a href="../4924/atomics.html">Atomics</a></li>
                <li><a href="../1930/bit-fields.html">Bit-fields</a></li>
                <li><a href="../3336/boolean.html">Boolean</a></li>
                <li><a href="../1285/command-line-arguments.html">Command-line arguments</a></li>
                <li><a href="../10670/comments.html">Comments</a></li>
                <li><a href="../10543/common-c-programming-idioms-and-developer-practices.html">Common C programming idioms and developer practices</a></li>
                <li><a href="../2006/common-pitfalls.html">Common pitfalls</a></li>
                <li><a href="../1337/compilation.html">Compilation</a></li>
                <li><a href="../4135/compound-literals.html">Compound Literals</a></li>
                <li><a href="../7397/constraints.html">Constraints</a></li>
                <li><a href="../6257/create-and-include-header-files.html">Create and include header files</a></li>
                <li><a href="../309/data-types.html">Data Types</a></li>
                <li><a href="../3104/declaration-vs-definition.html">Declaration vs Definition</a></li>
                <li><a href="../3729/declarations.html">Declarations</a></li>
                <li><a href="../5460/enumerations.html">Enumerations</a></li>
                <li><a href="../2486/error-handling.html">Error handling</a></li>
                <li><a href="../507/files-and-i-o-streams.html">Files and I/O streams</a></li>
                <li><a href="../3750/formatted-input-output.html">Formatted Input/Output</a></li>
                <li><a href="../1006/function-parameters.html">Function Parameters</a></li>
                <li><a href="../250/function-pointers.html">Function Pointers</a></li>
                <li><a href="../571/generic-selection.html">Generic selection</a></li>
                <li><a href="../1804/identifier-scope.html">Identifier Scope</a></li>
                <li><a href="../4832/implementation-defined-behaviour.html">Implementation-defined behaviour</a></li>
                <li><a href="../2529/implicit-and-explicit-conversions.html">Implicit and Explicit Conversions</a></li>
                <li><a href="../4547/initialization.html">Initialization</a></li>
                <li><a href="../4263/inline-assembly.html">Inline assembly</a></li>
                <li><a href="../7427/inlining.html">Inlining</a></li>
                <li><a href="../10564/interprocess-communication--ipc-.html">Interprocess Communication (IPC)</a></li>
                <li><a href="../5151/iteration-statements-loops--for--while--do-while.html">Iteration Statements/Loops: for, while, do-while</a></li>
                <li><a href="../5568/jump-statements.html">Jump Statements</a></li>
                <li><a href="../560/linked-lists.html">Linked lists</a></li>
                <li><a href="../3455/literals-for-numbers--characters-and-strings.html">Literals for numbers, characters and strings</a></li>
                <li><a href="../4726/memory-management.html">Memory management</a></li>
                <li><a href="../7111/multi-character-character-sequence.html">Multi-Character Character Sequence</a></li>
                <li><a href="../10489/multithreading.html">Multithreading</a></li>
                <li><a href="../256/operators.html">Operators</a></li>
                <li><a href="../6862/pass-2d-arrays-to-functions.html">Pass 2D-arrays to functions</a></li>
                <li><a href="../1108/pointers.html">Pointers</a></li>
                <li><a href="../447/preprocessor-and-macros.html">Preprocessor and Macros</a></li>
                <li><a href="../365/random-number-generation.html">Random Number Generation</a></li>
                <li><a href="../3073/selection-statements.html">Selection Statements</a></li>
                <li><a href="../1275/sequence-points.html">Sequence points</a></li>
                <li><a href="../7094/side-effects.html">Side Effects</a></li>
                <li><a href="../453/signal-handling.html">Signal handling</a></li>
                <li><a href="../3170/standard-math.html">Standard Math</a></li>
                <li><a href="../3597/storage-classes.html">Storage Classes</a></li>
                <li><a href="../1990/strings.html">Strings</a></li>
                <li><a href="../1119/structs.html">Structs</a></li>
                <li><a href="../4590/structure-padding-and-packing.html">Structure Padding and Packing</a></li>
                <li><a href="testing-frameworks.html">Testing frameworks</a></li>
                <li><a href="../4432/threads--native-.html">Threads (native)</a></li>
                <li><a href="../2588/type-qualifiers.html">Type Qualifiers</a></li>
                <li><a href="../2681/typedef.html">Typedef</a></li>
                <li><a href="../364/undefined-behavior.html">Undefined behavior</a></li>
                <li><a href="../7645/unions.html">Unions</a></li>
                <li><a href="../2674/valgrind.html">Valgrind</a></li>
                <li><a href="../455/variable-arguments.html">Variable arguments</a></li>
                <li><a href="../628/x-macros.html">X-macros</a></li>
    </ul>

            </div>

        </div>
    </div>
    <div class="col-content">
        <div class="col-content-inner">
            


<div class="page-article" itemprop="mainEntityOfPage">

    <h1 itemprop="headline" id="testing-frameworks">Testing frameworks</h1>
    
    <div itemprop="articleBody">
            <script async type="text/javascript" src="https://cdn.carbonads.com/carbon.js?serve=CK7ITK3J&amp;placement=pythonpediacom" id="_carbonads_js"></script>

            <h2 id="introduction">Introduction</h2>
            <div>
                <p>Many developers use unit tests to check that their software works as expected.  Unit tests check small units of larger pieces of software, and ensure that the outputs match expectations. Testing frameworks make unit testing easier by providing set-up/tear-down services and coordinating the tests.</p>
<p>There are many unit testing frameworks available for C. For example, Unity is a pure C framework. People quite often use C++ testing frameworks to test C code; there are many C++ test frameworks too.</p>


            </div>



            <h2 id="remarks">Remarks</h2>
            <div>
                <p>Test Harness:</p>
<p>TDD - Test Driven Development:</p>
<p>Test double mechanisms in C:</p>
<ol>
<li>Link-time substitution</li>
<li>Function pointer substitution</li>
<li>Preprocessor substitution</li>
<li>Combined link-time and function pointer substitution</li>
</ol>
<p>Note on C++ testing frameworks used in C:
Using C++ frameworks for testing a C program is quite a common practice as explained <a href="http://stackoverflow.com/questions/5335268/is-google-test-ok-for-testing-c-code">here</a>.</p>


            </div>


            <h2 id="cmocka">CMocka</h2>
            <div>
                <p><a href="https://cmocka.org/" rel="nofollow noreferrer">CMocka</a> is an elegant unit testing framework for C with support for mock objects. It only requires the standard C library, works on a range of computing platforms (including embedded) and with different compilers. It has a <a href="https://lwn.net/Articles/558106/" rel="nofollow noreferrer">tutorial</a> on testing with mocks, <a href="https://api.cmocka.org/" rel="nofollow noreferrer">API documentation</a>, and a variety of <a href="https://git.cryptomilk.org/projects/cmocka.git/tree/example" rel="nofollow noreferrer">examples</a>.</p>
<pre><code>#include &lt;stdarg.h&gt;
#include &lt;stddef.h&gt;
#include &lt;setjmp.h&gt;
#include &lt;cmocka.h&gt;

void null_test_success (void ** state) {}

void null_test_fail (void ** state)
{
    assert_true (0);
}

/* These functions will be used to initialize
   and clean resources up after each test run */
int setup (void ** state)
{
    return 0;
}

int teardown (void ** state)
{
    return 0;
}


int main (void)
{
    const struct CMUnitTest tests [] =
    {
        cmocka_unit_test (null_test_success),
        cmocka_unit_test (null_test_fail),
    };

    /* If setup and teardown functions are not
       needed, then NULL may be passed instead */

    int count_fail_tests =
        cmocka_run_group_tests (tests, setup, teardown);

    return count_fail_tests;
}
</code></pre>


            </div>
            <h2 id="cpputest">CppUTest</h2>
            <div>
                <p><a href="https://github.com/cpputest/cpputest" rel="nofollow noreferrer">CppUTest</a> is an <a href="https://en.wikipedia.org/wiki/XUnit" rel="nofollow noreferrer">xUnit</a>-style framework for unit testing C and C++. It is written in C++ and aims for portability and simplicity in design. It has support for memory leak detection, building mocks, and running its tests along with the Google Test. Comes with helper scripts and sample projects for Visual Studio and Eclipse CDT.</p>
<pre><code>#include &lt;CppUTest/CommandLineTestRunner.h&gt;
#include &lt;CppUTest/TestHarness.h&gt;


TEST_GROUP(Foo_Group) {}

TEST(Foo_Group, Foo_TestOne) {}

/* Test runner may be provided options, such
   as to enable colored output, to run only a
   specific test or a group of tests, etc. This
   will return the number of failed tests. */

int main(int argc, char ** argv)
{
    RUN_ALL_TESTS(argc, argv);
}
</code></pre>
<p>A test group may have a <code>setup()</code> and a <code>teardown()</code> method. The <code>setup</code> method is called prior to each test and the <code>teardown()</code> method is called after. Both are optional and either may be omitted independently. Other methods and variables may also be declared inside a group and will be available to all tests of that group.</p>
<pre><code>TEST_GROUP(Foo_Group)
{
    size_t data_bytes = 128;
    void * data;

    void setup()
    {
        data = malloc(data_bytes);
    }

    void teardown()
    {
        free(data);
    }

    void clear()
    {
        memset(data, 0, data_bytes);
    }
}
</code></pre>


            </div>
            <h2 id="unity-test-framework">Unity Test Framework</h2>
            <div>
                <p><a href="http://www.throwtheswitch.org/unity" rel="nofollow noreferrer">Unity</a> is an <a href="https://en.wikipedia.org/wiki/XUnit" rel="nofollow noreferrer">xUnit</a>-style test framework for unit testing C. It is written completely in C and is portable, quick, simple, expressive and extensible. It is designed to especially be also useful for unit testing for embedded systems.</p>
<p>A simple test case that checks the return value of a function, might look as follows</p>
<pre><code>void test_FunctionUnderTest_should_ReturnFive(void)
{
    TEST_ASSERT_EQUAL_INT( 5, FunctionUnderTest() );
}
</code></pre>
<p>A full test file might look like:</p>
<pre><code>#include &quot;unity.h&quot;
#include &quot;UnitUnderTest.h&quot; /* The unit to be tested. */

void setUp (void) {} /* Is run before every test, put unit init calls here. */
void tearDown (void) {} /* Is run after every test, put unit clean-up calls here. */

void test_TheFirst(void)
{
    TEST_IGNORE_MESSAGE(&quot;Hello world!&quot;); /* Ignore this test but print a message. */
}

int main (void)
{
    UNITY_BEGIN();
    RUN_TEST(test_TheFirst); /* Run the test. */
    return UNITY_END();
}  
</code></pre>
<p>Unity comes with some example projects, makefiles and some Ruby rake scripts that help make creating longer test files a bit easier.</p>


            </div>
    </div>
   
    
    <hr/>
    <div class="paging">
        <div class="paging-previous">
                    <a href="../4590/structure-padding-and-packing.html">Previous Topic</a>
        </div>
        <div class="paging-next">
                <a href="../4432/threads--native-.html">Next Topic</a>
        </div>
    </div>
    <hr/>
    
    <div style="display: none">
        <div itemprop="author" itemscope itemtype="https://schema.org/Organization"><span itemprop="name">SO Community</span></div>
        <div itemprop="dateCreated">2016-09-15</div>
        <div itemprop="datePublished">2016-09-15</div>
        <div itemprop="dateModified">2017-07-17</div>
        <div itemprop="image" itemscope itemtype="https://schema.org/ImageObject">
            <span itemprop="url">http://i.stack.imgur.com/3bQIZ.png</span>
        </div>
        <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
            <span itemprop="name">C Language Pedia</span>
            <span itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
                <span itemprop="url">https://c.programmingpedia.net/favicon.ico</span>
            </span>
        </div>
    </div>
    <div class="box-copyright">
        <div>This modified text is an extract of the original Stack Overflow Documentation created by following <a href="https://riptutorial.com/contributor?topicId=6779" target="_blank">contributors</a> and released under <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank">CC BY-SA 3.0</a></div>
        <div>This website is not affiliated with <a href="https://stackoverflow.com/" target="_blank">Stack Overflow</a></div>
        <div>Email: <a href="mailto: tutorialpedia@outlook.com">tutorialpedia@outlook.com</a></div>
    </div>
</div>


            
        </div>
    </div>
    <div class="col-aside-right">
        <div class="col-aside-right-inner">


<ul id="accordion_-896188466" class="nav-toc">
        <li class="nav-toc-item   " >
                <a class="nav-toc-link" href="#introduction">
                    Introduction
                </a>
            
        </li>
        <li class="nav-toc-item   " >
                <a class="nav-toc-link" href="#remarks">
                    Remarks
                </a>
            
        </li>
        <li class="nav-toc-item   " >
                <a class="nav-toc-link" href="#cmocka">
                    CMocka
                </a>
            
        </li>
        <li class="nav-toc-item   " >
                <a class="nav-toc-link" href="#cpputest">
                    CppUTest
                </a>
            
        </li>
        <li class="nav-toc-item   " >
                <a class="nav-toc-link" href="#unity-test-framework">
                    Unity Test Framework
                </a>
            
        </li>
</ul>

        </div>
    </div>
</div>
<div class="site-footer">
</div>
    
    <a href="#" id="scroll-to-top" class="back-to-top" style="display: inline;">Icon</a>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="http://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script>
    $(function() {
        $('a').each(function() {
            var a = new RegExp('/' + window.location.host + '/');
            if (!a.test(this.href)) {
                $(this).attr("target", "_blank");
            }
        });

        $("table").addClass("table table-bordered table-hover table-responsive-sm table-striped");
        $("thead").addClass("thead-dark");

        $('aside a').each(function() {
            if ($(this).attr('href') == '/{{page.permalink}}' ||
                $(this).attr('href') == '{{ site.github.url }}/{{page.permalink}}') {
                $(this).addClass('font-weight-bold');
            }
        });
    });
</script>


</body>

<!-- Mirrored from c.programmingpedia.net/en/tutorial/6779/testing-frameworks by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Jan 2021 09:03:37 GMT -->
</html>

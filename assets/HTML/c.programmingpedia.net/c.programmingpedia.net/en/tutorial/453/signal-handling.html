<!DOCTYPE html>



<html lang="en" itemscope itemtype="http://schema.org/TechArticle">

<!-- Mirrored from c.programmingpedia.net/en/tutorial/453/signal-handling by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Jan 2021 09:03:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- webmaster tools -->
        <meta name="google-site-verification" content="" />
        <!-- Open Graph Tags -->
        <meta name="title" property="og:title" content="Signal handling | C Language Tutorial">
        <meta name="description" property="og:description" content="Signal handling | C Language Tutorial">
        <title>Signal handling | C Language Tutorial</title>

    

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    
        <style>
            body{margin:0;}img{max-width:100%;}ul{margin-top:0;margin-bottom:1rem;}.list-inline{padding-left:0;list-style:none;}.list-inline-item{display:inline-block;}.list-inline-item:not(:last-child){margin-right:.5rem;}.site-header{display:flex;height:60px;}.site-main,.site-footer{display:flex;}.col-aside-left-and-sidebar .col-aside-left,.col-sidebar,.col-content,.col-aside-right{position:relative;}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner,.site-header .col-content-inner{height:60px;}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner{position:fixed;z-index:1;}.site-main .col-aside-left-inner,.site-main .col-sidebar-inner,.site-main .col-aside-right-inner{height:calc(100vh - 60px);position:fixed;}.site-main .col-sidebar-overflow{height:calc(100vh - 60px);position:relative;overflow-x:hidden;overflow-y:auto;}.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:calc(50% - 450px);}.col-aside-left,.col-aside-left-inner{width:calc(50% - 750px);}.col-sidebar,.col-sidebar-inner{width:300px;}.col-content,.col-content-inner{width:1200px;}.col-aside-right,.col-aside-right-inner{width:calc(50% - 750px);}@media(max-width:1869px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:calc(50% - 500px);}.col-aside-left,.col-aside-left-inner{display:none;}.col-sidebar,.col-sidebar-inner{width:calc(50% - 500px);}.col-content,.col-content-inner{width:1000px;}.col-aside-right,.col-aside-right-inner{width:calc(50% - 500px);}}@media(max-width:1549px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:calc(50% - 400px);}.col-sidebar,.col-sidebar-inner{width:calc(50% - 400px);}.col-content,.col-content-inner{width:800px;}.col-aside-right,.col-aside-right-inner{width:calc(50% - 400px);}}@media(max-width:1229px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:300px;}.col-sidebar,.col-sidebar-inner{width:300px;}.col-content{width:calc(100% - 300px);}.col-content-inner{width:100%;}.col-aside-right,.col-aside-right-inner{display:none;}}@media(max-width:1000px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{width:250px;}.col-sidebar,.col-sidebar-inner{width:250px;}.col-content{width:calc(100% - 250px);}}@media(max-width:767px){.col-aside-left-and-sidebar,.col-aside-left-and-sidebar-inner{display:none;}.col-sidebar,.col-sidebar-inner{display:none;}.col-content{width:100%;}.site-main{display:initial;}.site-main .col-sidebar,.site-main .col-sidebar-inner{display:initial;width:100%;position:relative;}.site-main .col-sidebar-overflow{height:calc(30vh);}}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner,.site-header .col-content-inner{box-shadow:rgba(116,129,141,.1) 0 3px 8px 0;border-bottom:1px solid #d4dadf;}.site-header .col-aside-left-and-sidebar-inner,.site-header .col-aside-right-inner,.site-main .col-aside-left-inner,.site-main .col-sidebar-inner,.site-main .col-aside-right-inner{background:#f5f7f9 none repeat scroll 0% 0%;}.site-header .col-aside-left-and-sidebar-inner,.site-main .col-sidebar-inner{border-right:1px solid #e6ecf1;}.site-header .col-aside-right,.site-main .col-aside-right{border-left:1px solid #e6ecf1;}.brand{font-size:24px;font-weight:bold;height:100%;text-align:right;margin-right:20px;margin-top:10px;}
        </style>
    <link rel="stylesheet" type="text/css" href="../../../styles/master.min0e4d.css?v=todo">
    <!-- to fix/move? -->
    

    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-55584370-32"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-131737769-1');
    </script>


</head>
<body>


<div class="site-header">
    <div class="col-aside-left-and-sidebar">
        <div class="col-aside-left-and-sidebar-inner">
            <div class="brand">
                <i class="fas fa-yin-yang" style="color: #0056b3;"></i>&nbsp;
                C Language Pedia
            </div>
        </div>
    </div>
    <div class="col-content">
        <div class="col-content-inner">
<div>
    <ul class="list-inline">
        <li class="list-inline-item"><a href="../../../index.html">Tutorial</a></li>
            <li class="list-inline-item"><a href="../../knowledge-base.html">Knowledge-Base</a></li>

            <li class="list-inline-item"><a href="../../awesome-learning/book.html">Awesome</a></li>
    </ul>
</div>

<style>
    .site-header .col-content .list-inline {
        padding-left: 20px;
        padding-top: 15px;

        font-weight: bold;
    }
</style>
        </div>
    </div>
    <div class="col-aside-right">
        <div class="col-aside-right-inner">
            
        </div>
    </div>
</div>
<div class="site-main">
    <div class="col-aside-left">
        <div class="col-aside-left-inner">
            
        </div>
    </div>
    <div class="col-sidebar">
        <div class="col-sidebar-inner">

            <div class="col-sidebar-overflow">
                
    <ul>
                    <li><a href="../../../index.html">Getting started with C Language</a></li>
                <li><a href="../6846/-ctype-h----character-classification---conversion.html">&lt;ctype.h&gt; — character classification &amp; conversion</a></li>
                <li><a href="../1301/aliasing-and-effective-type.html">Aliasing and effective type</a></li>
                <li><a href="../322/arrays.html">Arrays</a></li>
                <li><a href="../555/assertion.html">Assertion</a></li>
                <li><a href="../4924/atomics.html">Atomics</a></li>
                <li><a href="../1930/bit-fields.html">Bit-fields</a></li>
                <li><a href="../3336/boolean.html">Boolean</a></li>
                <li><a href="../1285/command-line-arguments.html">Command-line arguments</a></li>
                <li><a href="../10670/comments.html">Comments</a></li>
                <li><a href="../10543/common-c-programming-idioms-and-developer-practices.html">Common C programming idioms and developer practices</a></li>
                <li><a href="../2006/common-pitfalls.html">Common pitfalls</a></li>
                <li><a href="../1337/compilation.html">Compilation</a></li>
                <li><a href="../4135/compound-literals.html">Compound Literals</a></li>
                <li><a href="../7397/constraints.html">Constraints</a></li>
                <li><a href="../6257/create-and-include-header-files.html">Create and include header files</a></li>
                <li><a href="../309/data-types.html">Data Types</a></li>
                <li><a href="../3104/declaration-vs-definition.html">Declaration vs Definition</a></li>
                <li><a href="../3729/declarations.html">Declarations</a></li>
                <li><a href="../5460/enumerations.html">Enumerations</a></li>
                <li><a href="../2486/error-handling.html">Error handling</a></li>
                <li><a href="../507/files-and-i-o-streams.html">Files and I/O streams</a></li>
                <li><a href="../3750/formatted-input-output.html">Formatted Input/Output</a></li>
                <li><a href="../1006/function-parameters.html">Function Parameters</a></li>
                <li><a href="../250/function-pointers.html">Function Pointers</a></li>
                <li><a href="../571/generic-selection.html">Generic selection</a></li>
                <li><a href="../1804/identifier-scope.html">Identifier Scope</a></li>
                <li><a href="../4832/implementation-defined-behaviour.html">Implementation-defined behaviour</a></li>
                <li><a href="../2529/implicit-and-explicit-conversions.html">Implicit and Explicit Conversions</a></li>
                <li><a href="../4547/initialization.html">Initialization</a></li>
                <li><a href="../4263/inline-assembly.html">Inline assembly</a></li>
                <li><a href="../7427/inlining.html">Inlining</a></li>
                <li><a href="../10564/interprocess-communication--ipc-.html">Interprocess Communication (IPC)</a></li>
                <li><a href="../5151/iteration-statements-loops--for--while--do-while.html">Iteration Statements/Loops: for, while, do-while</a></li>
                <li><a href="../5568/jump-statements.html">Jump Statements</a></li>
                <li><a href="../560/linked-lists.html">Linked lists</a></li>
                <li><a href="../3455/literals-for-numbers--characters-and-strings.html">Literals for numbers, characters and strings</a></li>
                <li><a href="../4726/memory-management.html">Memory management</a></li>
                <li><a href="../7111/multi-character-character-sequence.html">Multi-Character Character Sequence</a></li>
                <li><a href="../10489/multithreading.html">Multithreading</a></li>
                <li><a href="../256/operators.html">Operators</a></li>
                <li><a href="../6862/pass-2d-arrays-to-functions.html">Pass 2D-arrays to functions</a></li>
                <li><a href="../1108/pointers.html">Pointers</a></li>
                <li><a href="../447/preprocessor-and-macros.html">Preprocessor and Macros</a></li>
                <li><a href="../365/random-number-generation.html">Random Number Generation</a></li>
                <li><a href="../3073/selection-statements.html">Selection Statements</a></li>
                <li><a href="../1275/sequence-points.html">Sequence points</a></li>
                <li><a href="../7094/side-effects.html">Side Effects</a></li>
                <li><a href="signal-handling.html">Signal handling</a></li>
                <li><a href="../3170/standard-math.html">Standard Math</a></li>
                <li><a href="../3597/storage-classes.html">Storage Classes</a></li>
                <li><a href="../1990/strings.html">Strings</a></li>
                <li><a href="../1119/structs.html">Structs</a></li>
                <li><a href="../4590/structure-padding-and-packing.html">Structure Padding and Packing</a></li>
                <li><a href="../6779/testing-frameworks.html">Testing frameworks</a></li>
                <li><a href="../4432/threads--native-.html">Threads (native)</a></li>
                <li><a href="../2588/type-qualifiers.html">Type Qualifiers</a></li>
                <li><a href="../2681/typedef.html">Typedef</a></li>
                <li><a href="../364/undefined-behavior.html">Undefined behavior</a></li>
                <li><a href="../7645/unions.html">Unions</a></li>
                <li><a href="../2674/valgrind.html">Valgrind</a></li>
                <li><a href="../455/variable-arguments.html">Variable arguments</a></li>
                <li><a href="../628/x-macros.html">X-macros</a></li>
    </ul>

            </div>

        </div>
    </div>
    <div class="col-content">
        <div class="col-content-inner">
            


<div class="page-article" itemprop="mainEntityOfPage">

    <h1 itemprop="headline" id="signal-handling">Signal handling</h1>
    
    <div itemprop="articleBody">
            <script async type="text/javascript" src="https://cdn.carbonads.com/carbon.js?serve=CK7ITK3J&amp;placement=pythonpediacom" id="_carbonads_js"></script>


            <h2 id="syntax">Syntax</h2>
            <div>
                <ul>
<li>void (*signal(int sig, void (*func)(int)))(int);</li>
</ul>


            </div>

            <h2 id="parameters">Parameters</h2>
            <div>
                <table><thead><tr><th>Parameter</th><th>Details</th></tr></thead><tbody><tr><td>sig</td><td>The signal to set the signal handler to, one of <code>SIGABRT</code>, <code>SIGFPE</code>, <code>SIGILL</code>, <code>SIGTERM</code>, <code>SIGINT</code>, <code>SIGSEGV</code> or some implementation defined value</td></tr><tr><td>func</td><td>The signal handler, which is either of the following: <code>SIG_DFL</code>, for the default handler, <code>SIG_IGN</code> to ignore the signal, or a function pointer with the signature <code>void foo(int sig);</code>.</td></tr></tbody></table>

            </div>

            <h2 id="remarks">Remarks</h2>
            <div>
                <p>The usage of signal handlers with only the guarantees from the C standard imposes various limitations what can, or can't be done in the user defined signal handler.</p>
<ul>
<li>
<p>If the user defined function returns while handling <code>SIGSEGV</code>, <code>SIGFPE</code>, <code>SIGILL</code> or any other implementation-defined hardware interrupt, the behavior is undefined by the C standard. This is because C's interface doesn't give means to change the faulty state (e.g after a division by <code>0</code>) and thus when returning the program is in exactly the same erroneous state than before the hardware interrupt occurred.</p>
</li>
<li>
<p>If the user defined function was called as the result of a call to <code>abort</code>, or <code>raise</code>, the signal handler is not allowed to call <code>raise</code>, again.</p>
</li>
<li>
<p>Signals can arrive in the middle of any operation, and therefore the indivisibility of operations can in generally not be guaranteed nor does signal handling work well with optimization. Therefore all modifications to data in a signal handler must be to variables</p>
<ul>
<li>of type <code>sig_atomic_t</code> (all versions) or a lock-free atomic type (since C11, optional)</li>
<li>that are <code>volatile</code> qualified.</li>
</ul>
</li>
<li>
<p>Other functions from the C standard library will usually not respect these restrictions, because they may change variables in the global state of the program. The C standard only makes guarantees for <code>abort</code>, <code>_Exit</code> (since C99), <code>quick_exit</code> (since C11), <code>signal</code> (for the same signal number), and some atomic operations (since C11).</p>
</li>
</ul>
<p>Behavior is undefined by the C standard if any of the rules above are violated. Platforms may have specific extensions, but these are generally not portable beyond that platform.</p>
<ul>
<li>
<p>Usually systems have their own list of functions that are <em>asynchronous signal safe</em>, that is of C library functions that can be used from a signal handler. E.g often <code>printf</code> is among these function.</p>
</li>
<li>
<p>In particular the C standard doesn't define much about the interaction with its threads interface (since C11) or any platform specific thread libraries such as POSIX threads. Such platforms have to specify the interaction of such thread libraries with signals by themselves.</p>
</li>
</ul>


            </div>


            <h2 id="signal-handling-with-signal-">Signal Handling with “signal()”</h2>
            <div>
                <p><a href="https://en.wikipedia.org/wiki/C_signal_handling#Standard_signals" rel="nofollow">Signal numbers</a> can be synchronous (like <code>SIGSEGV</code> – segmentation fault) when they are triggered by a malfunctioning of the program itself or asynchronous (like <code>SIGINT</code> - interactive attention) when they are initiated from outside the program, e.g by a keypress as <code>Cntrl-C</code>.</p>
<p>The <code>signal()</code> function is part of the ISO C standard and can be used to assign a function to handle a specific signal</p>
<pre><code>#include &lt;stdio.h&gt;  /* printf() */
#include &lt;stdlib.h&gt; /* abort()  */
#include &lt;signal.h&gt; /* signal() */

void handler_nonportable(int sig)
{
    /* undefined behavior, maybe fine on specific platform */
    printf(&quot;Catched: %d\n&quot;, sig);
    
    /* abort is safe to call */
    abort();
}

sig_atomic_t volatile finished = 0;

void handler(int sig)
{
    switch (sig) {
    /* hardware interrupts should not return */
    case SIGSEGV:
    case SIGFPE:
    case SIGILL:
</code></pre>
<div class='version-specific' data-version-json='[{&quot;Type&quot;:&quot;GreaterThanOrEqual&quot;,&quot;GroupName&quot;:null,&quot;VersionName&quot;:&quot;C11&quot;}]'><span class='version-row'><span class='version'><span class='version-constraint version-kind-greaterthanorequal'>C11</span></span></span><div class='version-specific-content'>
<pre><code>      /* quick_exit is safe to call */
      quick_exit(EXIT_FAILURE);
</code></pre>
</div></div>
<div class='version-specific' data-version-json='[{&quot;Type&quot;:&quot;LessThan&quot;,&quot;GroupName&quot;:null,&quot;VersionName&quot;:&quot;C11&quot;}]'><span class='version-row'><span class='version'><span class='version-constraint version-kind-lessthan'>C11</span></span></span><div class='version-specific-content'>
<pre><code>      /* use _Exit in pre-C11 */
      _Exit(EXIT_FAILURE);
</code></pre>
</div></div>
<pre><code>    default:
       /* Reset the signal to the default handler, 
          so we will not be called again if things go
          wrong on return. */
      signal(sig, SIG_DFL);
      /* let everybody know that we are finished */
      finished = sig;
      return;
   }
}

int main(void)
{

    /* Catch the SIGSEGV signal, raised on segmentation faults (i.e NULL ptr access */
    if (signal(SIGSEGV, &amp;handler) == SIG_ERR) {
        perror(&quot;could not establish handler for SIGSEGV&quot;);
        return EXIT_FAILURE;
    }

    /* Catch the SIGTERM signal, termination request */
    if (signal(SIGTERM, &amp;handler) == SIG_ERR) {
        perror(&quot;could not establish handler for SIGTERM&quot;);
        return EXIT_FAILURE;
    }

    /* Ignore the SIGINT signal, by setting the handler to `SIG_IGN`. */
    signal(SIGINT, SIG_IGN);


    /* Do something that takes some time here, and leaves
       the time to terminate the program from the keyboard. */

    /* Then: */

    if (finished) {
       fprintf(stderr, &quot;we have been terminated by signal %d\n&quot;, (int)finished);
        return EXIT_FAILURE;
    }


    /* Try to force a segmentation fault, and raise a SIGSEGV */
    {
      char* ptr = 0;
      *ptr = 0;
    }

    /* This should never be executed */
    return EXIT_SUCCESS;
}
</code></pre>
<p>Using <code>signal()</code> imposes important limitations what you are allowed to do inside the signal handlers, see the remarks for further information.</p>
<p><a class='doc-link' href="http://www.riptutorial.com/posix/topic/4532/signals">POSIX</a> recommends the usage of <code>sigaction()</code> instead of <code>signal()</code>, due to its underspecified behavior and significant implementation variations. POSIX also defines <a href="https://en.wikipedia.org/wiki/Unix_signal#POSIX_signals" rel="nofollow">many more signals</a> than ISO C standard, including <code>SIGUSR1</code> and <code>SIGUSR2</code>, which can be used freely by the programmer for any purpose.</p>


            </div>
    </div>
   
    
    <hr/>
    <div class="paging">
        <div class="paging-previous">
                    <a href="../7094/side-effects.html">Previous Topic</a>
        </div>
        <div class="paging-next">
                <a href="../3170/standard-math.html">Next Topic</a>
        </div>
    </div>
    <hr/>
    
    <div style="display: none">
        <div itemprop="author" itemscope itemtype="https://schema.org/Organization"><span itemprop="name">SO Community</span></div>
        <div itemprop="dateCreated">2016-04-14</div>
        <div itemprop="datePublished">2016-04-14</div>
        <div itemprop="dateModified">2016-08-08</div>
        <div itemprop="image" itemscope itemtype="https://schema.org/ImageObject">
            <span itemprop="url">http://i.stack.imgur.com/3bQIZ.png</span>
        </div>
        <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
            <span itemprop="name">C Language Pedia</span>
            <span itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
                <span itemprop="url">https://c.programmingpedia.net/favicon.ico</span>
            </span>
        </div>
    </div>
    <div class="box-copyright">
        <div>This modified text is an extract of the original Stack Overflow Documentation created by following <a href="https://riptutorial.com/contributor?topicId=453" target="_blank">contributors</a> and released under <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank">CC BY-SA 3.0</a></div>
        <div>This website is not affiliated with <a href="https://stackoverflow.com/" target="_blank">Stack Overflow</a></div>
        <div>Email: <a href="mailto: tutorialpedia@outlook.com">tutorialpedia@outlook.com</a></div>
    </div>
</div>


            
        </div>
    </div>
    <div class="col-aside-right">
        <div class="col-aside-right-inner">


<ul id="accordion_-1144064495" class="nav-toc">
        <li class="nav-toc-item   " >
                <a class="nav-toc-link" href="#syntax">
                    Syntax
                </a>
            
        </li>
        <li class="nav-toc-item   " >
                <a class="nav-toc-link" href="#parameters">
                    Parameters
                </a>
            
        </li>
        <li class="nav-toc-item   " >
                <a class="nav-toc-link" href="#remarks">
                    Remarks
                </a>
            
        </li>
        <li class="nav-toc-item   " >
                <a class="nav-toc-link" href="#signal-handling-with-signal-">
                    Signal Handling with “signal()”
                </a>
            
        </li>
</ul>

        </div>
    </div>
</div>
<div class="site-footer">
</div>
    
    <a href="#" id="scroll-to-top" class="back-to-top" style="display: inline;">Icon</a>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="http://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script>
    $(function() {
        $('a').each(function() {
            var a = new RegExp('/' + window.location.host + '/');
            if (!a.test(this.href)) {
                $(this).attr("target", "_blank");
            }
        });

        $("table").addClass("table table-bordered table-hover table-responsive-sm table-striped");
        $("thead").addClass("thead-dark");

        $('aside a').each(function() {
            if ($(this).attr('href') == '/{{page.permalink}}' ||
                $(this).attr('href') == '{{ site.github.url }}/{{page.permalink}}') {
                $(this).addClass('font-weight-bold');
            }
        });
    });
</script>


</body>

<!-- Mirrored from c.programmingpedia.net/en/tutorial/453/signal-handling by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Jan 2021 09:03:37 GMT -->
</html>
